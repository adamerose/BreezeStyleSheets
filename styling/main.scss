// ========================================================================== //
// Styles & Color

// ========================================================================== //
// Generic

QWidget {
    background-color: $BACKGROUND_2;
    color: $FOREGROUND_1;

    // For alternating row color
    alternate-background-color: $BACKGROUND_3; // TODO

    selection-background-color: $SELECTION_2;
    selection-color: $FOREGROUND_1;

    &:disabled {
        color: $FOREGROUND_DISABLED;
    }

    &::item {
        &:selected {
            &:active {
                background-color: $SELECTION_1;
            }
            &:!active {
                background-color: $BACKGROUND_2;
            }
        }
    }

}

QWidget {
    background-color: $BACKGROUND_2;
}
// Containers
QTabWidget .QWidget,
QTabWidget .QFrame,
QTabWidget .QSplitter,
QTabWidget .QStackedWidget,
QTabBar::tab:selected,
QTabWidget::pane,
QDial,
QGroupBox {
    background-color: $BACKGROUND_1;
}

// Interactables
QToolButton,
QToolButton::menu-button,
QPushButton,
QActionButton,
QTabBar::tab:!selected,
QToolBox::tab:!selected {
    &:hover {
        background-color: $BACKGROUND_1;
    }
}

QTabBar::tab:selected,
QGroupBox {
    border: 1px solid $BORDER_1;
}


QAbstractScrollArea {
    background-color: $BACKGROUND_2;
    border: 1px solid $BORDER_1;
}

QToolButton,
QComboBox,
QLineEdit,
QTextEdit,
QPlainTextEdit,
QDockWidget,
QTreeView,
QListView,
QColumnView,
QDateEdit, 
QDateTimeEdit,
QGroupBox,
QAbstractSpinBox,
QDateEdit>QAbstractItemView, 
QDateTimeEdit>QAbstractItemView,
QToolBox {
    background-color: $BACKGROUND_0;
    border: 1px solid $BORDER_1;
    
    &:disabled {
        color: $FOREGROUND_DISABLED;
    }
}


QStatusBar,
QDockWidget::title, {
    background: $BACKGROUND_3;
    border: 1px solid $BORDER_1;
}

QLabel,
QCheckBox,
QRadioButton,
QSlider {
    background-color: transparent;
}


QPushButton,
QToolBox::tab {
    background-color: $BACKGROUND_SURFACE;
    border: 1px solid $BORDER_1;
}

QCheckBox, 
QRadioButton, 
QComboBox, 
QLineEdit,
QAbstractSpinBox {
    padding: 3px 1px;
}

QGroupBox {
    padding-top: 16px;
}

// ========================================================================== //
// Buttons



QPushButton, 
QToolButton {
    padding: 3px 1px;
    &:checked{
        background-color: $BACKGROUND_3;
    }
}

// ========================================================================== //
// QTableView

QTableView {
    border: 1px solid $BORDER_1;
    // This background is seen between cells so effectively is cell border color
    background-color: $BORDER_2;
    &::item{
        border: none;
        background-color: $BACKGROUND_0;
    }
}

QAbstractScrollArea::corner {
    background-color: $BACKGROUND_2;
}

QHeaderView {
    left: -5px;
    border: none;
    outline: none;
    &::section {
        border: 1px solid $BORDER_1;
        outline: none;
        padding: 2px 8px;
        &:horizontal {
            border-top-width: 0px;
            border-left-width: 0px;
            background-color: $BACKGROUND_SURFACE;
        }
        &:vertical {
            border-top-width: 0px;
            border-left-width: 0px;
            background-color: $BACKGROUND_SURFACE;
        }
    }
}


QTableCornerButton {
    &::section {
        border: 1px solid $BORDER_1;
        border-width: 0px;
        border-right-width: 1px;
        border-bottom-width: 1px;
        background-color: $BACKGROUND_SURFACE;
    }
}

// ========================================================================== //
// QScrollBar

QScrollBar {
    // https://stackoverflow.com/a/17935692
    &::add-page, &::sub-page {
        background-color: $BACKGROUND_2;
    }
    
    // Want light handle on dark background regardless of theme
    background-color: $BACKGROUND_2;

    &::handle {
        background-color: $FOREGROUND_2;
        &:disabled{background-color: $FOREGROUND_DISABLED;}
        
        border: 1px solid $BORDER_1;
        border-radius: 4px;
        margin: 3px;
        &:vertical {
            border-width: 1px 0px;
            min-height: 40px;
        }
        &:horizontal {
            border-width: 0px 1px;
            min-width: 40px;
        }
    }
    
    &:horizontal {
        border-top: 1px solid $BORDER_1;
        height: 16px;
        margin: 0px 16px;
    }

    &:vertical {
        border-left: 1px solid $BORDER_1;
        width: 16px;
        margin: 16px 0px;
    }

    &::add-line {
        margin: 0;
        &:horizontal {
            border-top: 1px solid $BORDER_1;
            border-left: 1px solid $BORDER_1;
            border-right: 1px solid $BORDER_1;
            height: 16px;
            width: 16px;
            subcontrol-position: right;
            subcontrol-origin: margin;
        }

        &:vertical {
            border-left: 1px solid $BORDER_1;
            border-top: 1px solid $BORDER_1;
            border-bottom: 1px solid $BORDER_1;
            height: 16px;
            width: 16px;
            subcontrol-position: bottom;
            subcontrol-origin: margin;
        }
    }

    &::sub-line {
        margin: 0;
        &:horizontal {
            image: url(':/resources/arrow_left.svg');
            border-top: 1px solid $BORDER_1;
            border-right: 1px solid $BORDER_1;
            height: 16px;
            width: 16px;
            subcontrol-position: left;
            subcontrol-origin: margin;
        }

        &:vertical {
            image: url(':/resources/arrow_up.svg');
            border-left: 1px solid $BORDER_1;
            border-bottom: 1px solid $BORDER_1;
            height: 16px;
            width: 16px;
            subcontrol-position: top;
            subcontrol-origin: margin;
        }
    }
}

// ========================================================================== //
// QSlider

QSlider {
    &::handle {

        &:horizontal {
            background: $FOREGROUND_2;
            border: $BORDER_1;
            width: 8px;
            height: 8px;
            margin: -8px 0px;
            border-radius: 2px;

            &:hover {
                background: $SELECTION_1;
                border: $SELECTION_1;
            }

        }

        &:vertical {
            background: $FOREGROUND_2;
            border: $BORDER_1;
            width: 8px;
            height: 8px;
            margin: 0 -8px;
            border-radius: 2px;

            &:hover {
                background: $SELECTION_1;
                border: $SELECTION_1;
            }

        }
    }
    &::groove {
        &:horizontal {
            background: $BACKGROUND_3;
            border: $BORDER_1;
            height: 4px;
            margin: 0px;
            border-radius: 2px;
        }

        &:vertical {
            background: $BACKGROUND_3;
            border: $BORDER_1;
            width: 4px;
            margin: 0px;
            border-radius: 2px;
        }
    }

    &::add-page {
        &:vertical {
            background: $SELECTION_2;
            border: $BORDER_1;
            width: 4px;
            margin: 0px;
            border-radius: 2px;
        }
    }

    &::sub-page {
        &:horizontal {
            background: $SELECTION_2;
            border: $BORDER_1;
            height: 4px;
            margin: 0px;
            border-radius: 2px;

        }
    }
}
// ========================================================================== //
// QTabWidget

QTabWidget {
    &::pane {
        border: 1px solid $BORDER_1;
        padding: 1px;
        &:top { 
            // Hide border between tab and pane (https://stackoverflow.com/a/10047229/3620725)
            top: -1px; 
            // No rounding where edge tab meets pane
            border-top-left-radius: 0px;
        }
        &:bottom { 
            bottom: -1px; 
            border-bottom-left-radius: 0px;
        }
        &:left { 
            left: -1px; 
            border-top-left-radius: 0px;
        }
        &:right { 
            border-top-right-radius: 0px;
            right: -1px; 
        }
    }
}

QTabBar {
    &::tab {
        &:!selected {
            // Gradient creates appearance of shadow being cast by pane onto tabs
            background-color: qlineargradient(0, 1, 0, 0, (0.0 rgba(0,0,0,0.1), 0.2 $BACKGROUND_2));
            border: 1px solid $BORDER_1;
            margin-top: 2px;
            
            &:!last{
                border-right-width: 0px;
            }
            &:last{
                border-right-width: 1px;
            
            }&:previous-selected{
                border-left-width: 0px;
            }
        }

        &:top,
        &:bottom {
            padding: 6px 16px;
        }

        &:left,
        &:right {
            padding: 16px 6px;
        }

        &:top {
            &:selected { border-bottom-width: 0px; }
            border-bottom-left-radius: 0px;
            border-bottom-right-radius: 0px;
        }
        &:bottom {
            &:selected { border-top-width: 0px; }
            border-top-left-radius: 0px;
            border-top-right-radius: 0px;
        }
        &:left {
            &:selected { border-right-width: 0px; }
            border-top-right-radius: 0px;
            border-bottom-right-radius: 0px;
        }
        &:right {
            &:selected { border-left-width: 0px; }
            border-bottom-left-radius: 0px;
            border-top-left-radius: 0px;
        }
    }
}


// ========================================================================== //
// QDockWidget

QDockWidget {
    &::title {
        padding: 6px;
    }
}

// ========================================================================== //
// QToolBox

QToolBox {
    &::tab {
        border-width: 0px;
        border-top-width: 1px;
        border-bottom-width: 2px;
        border-top-left-radius: 2px;
        border-top-right-radius: 2px;

        &:selected {
            font-weight: bold;
        }
    }

}


// ========================================================================== //
// QMainMenu
QStatusBar {
    border: 0px solid;
    padding: 0px;

    /* Fixes #205, white vertical borders separating items */
    &::item {
        border: none;
    }


    QLabel {
        /* Fixes Spyder #9120, #9121 */
        background: transparent;
    }
}
QStatusBar {
    QWidget {
        background: transparent;
    }
    /* Removes white vertical borders separating items */
    &::item {
        border: none;
    }
}

// ========================================================================== //
// Misc

QMenuBar {
    border-bottom: 1px solid $BORDER_2;
}

QMenu {
    border: 1px solid $BORDER_1;
}
// ========================================================================== //
// Rounded Edges
QToolButton,
QComboBox,
QLineEdit,
QTextEdit,
QPlainTextEdit,
QTabWidget::pane,
QTabBar::tab,
QDockWidget,
QToolBox,
QDateEdit, 
QDateTimeEdit,
QGroupBox,
QDateEdit>QAbstractItemView, 
QDateTimeEdit>QAbstractItemView,
.QWidget {
    border-radius: $SIZE_BORDER_RADIUS;
}

// ========================================================================== //
// Icons
QMenu::right-arrow {
    image: url(':/resources/arrow_right.svg');
}
QScrollBar {
    &::add-line {
        &:horizontal {
            
            image: url(':/resources/arrow_right.svg');
            icon-size: 32px;
        }

        &:vertical {
            image: url(':/resources/arrow_down.svg');
            icon-size: 32px;
        }
    }

    &::sub-line {
        &:horizontal {
        }

        &:vertical {
        }
    }
}
QSizeGrip {
    width: 12px;
    height: 12px;
    image: url(':/resources/window_grip.svg');
}
QToolBar {
    &::handle {
        &:horizontal {
            image: url(':/resources/toolbar_move_horizontal.svg');
        }
        &:vertical {
            image: url(':/resources/toolbar_move_vertical.svg');
        }
    }

    &::separator {

        &:horizontal {
            image: url(':/resources/toolbar_separator_horizontal.svg');
        }

        &:vertical {
            image: url(':/resources/toolbar_separator_vertical.svg');
        }
    }
}
QAbstractSpinBox {
    &::up-arrow {
        image: url(':/resources/arrow_up.svg');
        height: 8px;
        width: 8px;
    }
    &::down-arrow {
        image: url(':/resources/arrow_down.svg');
        height: 8px;
        width: 8px;
    }
}
QComboBox {
    &::down-arrow {
            image: url(':/resources/arrow_down.svg');
    }
}
QTabBar {

    &::close-button {
        margin: 2px;
        padding: 2px;
        image: url(':/resources/close.svg');
    }
}

QDockWidget {
    outline: 1px solid $BACKGROUND_3;
    titlebar-close-icon: url(':/resources/close.svg');
    titlebar-normal-icon: url(':/resources/window_undock.svg');

    &::close-button, &::float-button {
        icon-size: 32px; 
    }
    
}

QTreeView {
    &:branch {
        &:has-siblings:!adjoins-item {
            border-image: url(':/resources/branch_line.svg');
        }

        &:has-siblings:adjoins-item {
            border-image: url(':/resources/branch_more.svg');
        }

        &:!has-children:!has-siblings:adjoins-item {
            border-image: url(':/resources/branch_end.svg');
        }

        &:has-children:!has-siblings:closed,
        &:closed:has-children:has-siblings {
            border-image: none;
            image: url(':/resources/arrow_right.svg');
        }

        &:open:has-children:!has-siblings,
        &:open:has-children:has-siblings {
            border-image: none;
            image: url(':/resources/arrow_down.svg');
            icon-size: 32px;
        }

    }
}
QHeaderView {
    &::down-arrow {
        image: url(':/resources/arrow_down.svg');
    }

    &::up-arrow {
        image: url(':/resources/arrow_up.svg');
    }
}
QAbstractItemView::indicator,
QCheckBox::indicator, 
QGroupBox::indicator,
QMenu::indicator:non-exclusive {    
    width: 16px;
    height: 16px;

    &:unchecked {
        image: url(':/resources/checkbox_unchecked.svg');
    }

    &:checked {
        image: url(':/resources/checkbox_checked.svg');
    }

    &:indeterminate {
        image: url(':/resources/checkbox_indeterminate.svg');
    }
}

QRadioButton::indicator,
QMenu::indicator:exclusive {
    width: 16px;
    height: 16px;

    &:unchecked {
        image: url(':/resources/radio_unchecked.svg');
    }

    &:checked {
        image: url(':/resources/radio_checked.svg');
    }
    
}
